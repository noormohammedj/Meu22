<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Checkout — FemmeDress</title>
<meta name="description" content="Checkout — FemmeDress">
<link rel="manifest" href="/manifest.json">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/styles.css">
</head>
<body class="bg-gray-50 font-sans">
<header class="bg-white shadow-sm">
  <div class="max-w-3xl mx-auto px-4 py-4">
    <div class="flex items-center gap-4">
      <div class="logo w-12 h-12 flex items-center justify-center rounded-lg">FD</div>
      <div class="font-semibold">Checkout</div>
    </div>
  </div>
</header>
<main class="max-w-3xl mx-auto px-4 py-6">
  <div id="product" class="bg-white p-4 rounded-xl shadow-sm"></div>
  <div class="mt-4 bg-white p-4 rounded-xl shadow-sm">
    <h3 class="font-semibold mb-2">Payment</h3>
    <p class="text-sm text-gray-600">Razorpay integration (placeholder key). Replace `RAZORPAY_KEY` and integrate server-side order creation for production.</p>
    <div class="mt-3">
      <button id="payBtn" class="px-4 py-2 bg-pink-500 text-white rounded">Pay with Razorpay</button>
    </div>
  </div>
</main>

<script>
function q(name){ const url=new URL(location.href); return url.searchParams.get(name); }
const pid = Number(q('product') || 1);

async function load(){
  const res = await fetch('/catalog.json'); const data = await res.json();
  const it = data.find(d=>d.id===pid) || data[0];
  document.getElementById('product').innerHTML = `
    <div class="flex gap-4">
      <img src="/${it.image}" class="w-40 h-48 object-cover rounded" />
      <div>
        <div class="font-semibold text-lg">${it.title_en}</div>
        <div class="text-sm text-gray-600">${it.description_en}</div>
        <div class="mt-2 font-semibold text-pink-600">${it.price_display}</div>
      </div>
    </div>
  `;
  document.getElementById('payBtn').addEventListener('click', ()=>{
    const RAZORPAY_KEY = 'RAZORPAY_KEY_PLACEHOLDER';
    const options = {
      "key": RAZORPAY_KEY,
      "amount": (parseInt(it.price) * 100).toString(),
      "currency": "INR",
      "name": "FemmeDress",
      "description": it.title_en,
      "image": "/icon-192.png",
      "handler": function (response){
        location.href = '/thankyou.html?payment_id=' + response.razorpay_payment_id + '&product=' + it.id;
      },
      "prefill": { "name": "", "email": "" },
      "theme": { "color": "#ED4C67" }
    };
    var rzp = new Razorpay(options);
    rzp.open();
  });
}
load();
</script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</body>
</html>